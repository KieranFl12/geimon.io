<!DOCTYPE html>
<html lang=""en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv=""X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Racing Sans One' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <title>MAIN PAGE</title>
    <body style="background-color:rgb(0, 0, 0);">
</head>
<body>
    <div class="container">
        <a href="https://docs.google.com/document/d/1xF4fIeB9r2qQyF3x0cW7tvZFpIDo4apNW4Uhx_H95bo/edit?usp=sharing" target="_blank"><p style="font-size: 260%""><h1>Welcome to <game-title>Geimon!</game-title></a></h1></p>
        <h2>Home Page</h2>
    </div>
    <button class="button button" onclick="location.href='deck.html'">Deck Editor</button>
    &nbsp;&nbsp;
    <button class="button button" onclick="location.href='solo.html'">Solo Game</button>
    <br>
    <button class="button button" id="dynamicButton">Loading...</button>
<script>
  window.onload = function checkLoginStatus() {
    fetch('http://localhost:3000/me', {
      method: 'GET',
      credentials: 'include'
    })
    .then(res => {
      console.log("Response status:", res.status); // Log response status
      if (!res.ok) throw new Error('Network response was not ok');
      return res.json();
    })
    .then(data => {
      console.log("Server response data:", data); // Log the server response data
      const button = document.getElementById('dynamicButton');
      if (data.loggedIn) {
        // If logged in, show 'User Profile' and redirect to profile page on click
        button.textContent = 'User Profile';
        button.onclick = () => window.location.href = 'profile.html';
      } else {
        // If not logged in, show 'Login' and redirect to login page on click
        button.textContent = 'Login';
        button.onclick = () => window.location.href = 'login.html';
      }
    })
    .catch(err => {
      console.error('Error checking login status:', err); // Log error to console
      const button = document.getElementById('dynamicButton');
      button.textContent = 'Login';
      button.onclick = () => window.location.href = 'login.html';
    });
  };
</script>
    &nbsp;&nbsp;
    <button class="button button" onclick="location.href='single.html'">Single Game</button>
    <br>
    <button class="button button" onclick="location.href='about.html'">About Us</button>
    &nbsp;&nbsp;
    <button class="button button" onclick="location.href='match.html'">Match Game</button>
</body>
</html>